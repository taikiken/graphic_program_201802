<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="robots" content="noindex,nofollow" />


<script src="//players.brightcove.net/3948005094001/HkfUPcduf_default/index.min.js"></script>
<script src="//players.brightcove.net/videojs-ima3/videojs.ima3.min.js"></script>
<script src="brightcove_sdk_hls_files/videojs-contrib-hls.min.js"></script>

</head>

<body>

<h1>A-1</h1>

<ul>
  <li>実運用想定のHLS形式を再生 - https://video.undotsushin.com/original/lambda_test/hd/lambda_test.m3u8</li>
  <li>AdVantageの<a href="http://web-jp.ad-v.jp/adam/inline?CE=0&cat=RAN.CBC.PC&format=cm&page=" target="_blank">VAST</a>を読む</li>
</ul>

<div id="control">
  <video id="myPlayerID_a_1"
         data-account="3948005094001"
         data-player="HkfUPcduf"
         data-embed="default"
         data-mouse="true"
         data-controls="true"
         class="video-js"
         controls
         style="width:800px; height:450px;">
  </video>
</div>


<hr />



<script type="text/javascript">
(function () {

  var videoElement = document.getElementById('control');
  var videojs = self.videojs;
//  var player;

//  var player = videojs('myPlayerID_a_1').ready(function() {
//    var myPlayer;
//
//    myPlayer = this;
//
//    myPlayer.src({"type":"application/x-mpegURL", "src":"https://video.undotsushin.com/original/lambda_test/hd/lambda_test.m3u8"});
//    myPlayer.poster('https://www.undotsushin.com/prg_img/thumbnail1/04.jpg');
//    myPlayer.ima3({
//      debug: true,
//      adTechOrder: [
//        'html5'
//      ],
//      postrollTimeout: 2000,
//      prerollTimeout: 1000,
//      requestMode: 'onload',
//      serverUrl: 'http://web-jp.ad-v.jp/adam/inline?CE=0&cat=RAN.CBC.PC&format=cm&page=' + Date.now(),
//      timeout: 5000
//    });
//  });

  var player = videojs('myPlayerID_a_1', { fluid: true });
  player.ready(function() {
    player.src({"type":"application/x-mpegURL", "src":"https://video.undotsushin.com/original/lambda_test/hd/lambda_test.m3u8"});
    player.poster('https://www.undotsushin.com/prg_img/thumbnail1/04.jpg');
    player.ima3({
      debug: true,
      adTechOrder: [
        'html5'
//        'html5', 'flash'
      ],
      postrollTimeout: 2000,
      prerollTimeout: 1000,
      requestMode: 'onload',
      serverUrl: 'http://web-jp.ad-v.jp/adam/inline?CE=0&cat=RAN.CBC.PC&format=cm&page=' + Date.now(),
      timeout: 5000
    });
  });

//  player.height( 800, false );
//  player.width( 450, false );

//  function build() {
//    return videojs('myPlayerID_a_1').ready(function() {
//      var myPlayer;
//
//      myPlayer = this;
//
//      myPlayer.src({"type":"application/x-mpegURL", "src":"https://video.undotsushin.com/original/lambda_test/hd/lambda_test.m3u8"});
//      myPlayer.poster('https://www.undotsushin.com/prg_img/thumbnail1/04.jpg');
//      myPlayer.ima3({
//        debug: true,
//        adTechOrder: [
//          'html5'
//        ],
//        postrollTimeout: 2000,
//        prerollTimeout: 1000,
//        requestMode: 'onload',
//        serverUrl: 'http://web-jp.ad-v.jp/adam/inline?CE=0&cat=RAN.CBC.PC&format=cm&page=' + Date.now(),
//        timeout: 5000
//      });
//    });
//  }
//
//  player = build();

  player.on( 'ended', function( e ) {
    console.log( '*** on ended', e, this );
  } );

  player.on( 'play', function( e ) {
    console.log( '*** on play', e, this );
  } );

  player.on( 'adstart', function( e ) {
    console.log( '*** on adstart', e, this );
    player.controls( false );
  } );
  player.on( 'adend', function( e ) {
    console.log( '*** on adend', e, this );
    player.controls( true );
  } );

  var full = false;
//  player.on( 'fullscreenchange', function( e ) {
//    console.log( '*** on fullscreenchange', e, this );
//
//    full = !full;
//    if ( full ) {
//      player.height( window.innerHeight, true );
//      player.width( window.innerWidth, true );
//    } else {
//      player.height( 800, true );
//      player.width( 450, true );
//    }
//
//  } );

  // control
//  player.pause = function( e ) {
//    console.log( 'pause', e );
//  };
//  player.setVolume = function( e ) {
//    console.log( 'setVolume', e );
//  };
//  player.exitFullscreen = function( e ) {
//    console.log( 'exitFullscreen', e );
//  };
//  player.requestFullscreen = function( e ) {
//    console.log( 'requestFullscreen', e );
//  };


  console.log( 'player', player );
  var BR_PLAYER = {
    player: player
  };

  window.BR_PLAYER = BR_PLAYER;

//  function onClick( event ) {
//    console.log( 'onClick ***', event );
//    event.preventDefault();
//
//    if ( player.paused() ) {
//      // pause -> play
//      player.play();
//    } else {
//      player.pause();
//    }
//  }
//  videoElement.addEventListener( 'click', onClick, false )
}());
//
//(function () {
//
//  var myPlayer;
//  videojs('myPlayerID_a_2').ready(function() {
//    myPlayer = this;
//
//    myPlayer.src({"type":"application/x-mpegURL", "src":"https://video.undotsushin.com/original/lambda_test/hd/lambda_test.m3u8"});
//    myPlayer.poster('https://www.undotsushin.com/prg_img/thumbnail1/04.jpg');
//    myPlayer.ima3({
//      debug: true,
//      adTechOrder: [
//        'html5'
//      ],
//      postrollTimeout: 2000,
//      prerollTimeout: 1000,
//      requestMode: 'onload',
//      serverUrl: 'https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dskippablelinear&correlator=' + Date.now(),
//      timeout: 5000
//    });
//  });
//}());
//
//
//
//(function () {
//
//  var myPlayer;
//  videojs('myPlayerID_b').ready(function() {
//    myPlayer = this;
//
//    myPlayer.src({"type":"application/x-mpegURL", "src":"http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/sl.m3u8"});
//    myPlayer.poster('https://www.undotsushin.com/prg_img/thumbnail1/04.jpg');
//    myPlayer.ima3({
//      debug: true,
//      adTechOrder: [
//        'html5'
//      ],
//      postrollTimeout: 2000,
//      prerollTimeout: 1000,
//      requestMode: 'onload',
//      serverUrl: 'http://web-jp.ad-v.jp/adam/inline?CE=0&cat=RAN.CBC.PC&format=cm&page=' + Date.now(),
//      timeout: 5000
//    });
//  });
//}());
//
//
//(function () {
//
//  var myPlayer;
//  videojs('myPlayerID_c').ready(function() {
//    myPlayer = this;
//
//    myPlayer.src({"type":"video/mp4", "src":"sample.mp4"});
//    myPlayer.poster('https://www.undotsushin.com/prg_img/thumbnail1/04.jpg');
//    myPlayer.ima3({
//      debug: true,
//      adTechOrder: [
//        'html5'
//      ],
//      postrollTimeout: 2000,
//      prerollTimeout: 1000,
//      requestMode: 'onload',
//      serverUrl: 'http://web-jp.ad-v.jp/adam/inline?CE=0&cat=RAN.CBC.PC&format=cm&page=' + Date.now(),
//      timeout: 5000
//    });
//  });
//}());


</script>


</body>
</html>
