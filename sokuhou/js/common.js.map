{"version":3,"sources":["common.js"],"names":["options","breakpoints","pc","tab","sp","$","html","windoWidth","window","width","globalNav","target","parent","find","btn","on","mouseenter","_this","this","addClass","mouseleave","_class","attr","match","removeClass","searchClass","search","_parent","menuopener","open","toggleClass","globalNavChild_paging","input","select","blur","character","base","wrap","ul","li","len","length","wrapwidth","wrapHalf","distance","Math","round","speed","position","interval","css","transform","move","setTimeout","e","x","clientX","off","clearTimeout","fn","group","Number","index","_btn","current","scrollingAnimation","thisClass","o","extend","margin","list","windowHeight","innerHeight","height","doc","document","scrollPosition","scrollTop","i","push","eq","top","addAnimate","self","regexp","RegExp","thisPos","scrollingChangeURL","page","url","hash","location","replace","console","log","floor","history","pushState","velocity","duration","offset","easing","changeURL","dataurl","jQuery"],"mappings":"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","file":"common.js","sourcesContent":["const options = {\n};\noptions.breakpoints = {\n    \"pc\": 1000,\n    \"tab\": 768,\n    \"sp\": 767\n};\n\n\n(function($, options) {\n    $(function() {\n        const html = $('html');\n        options.windoWidth = $(window).width();\n\n        //グローバルナビの演出\n        let globalNav = {};\n        globalNav.target = $('#global-nav');\n        globalNav.parent = globalNav.target.find('.parent');\n        globalNav.btn = globalNav.parent.find('span');\n\n        globalNav.parent.on({\n            'mouseenter': function(){\n                if(options.windoWidth >= options.breakpoints.pc) {\n                    const _this = $(this);\n                    _this.addClass('current');\n                    html.addClass('gNav-show');\n                    // const ul = character.wrap.find('ul');\n                    // ul.eq(0).css({left: 0});\n                    // ul.eq(1).css({left: character.width});\n                }\n            },\n            'mouseleave': function(){\n                if(options.windoWidth >= options.breakpoints.pc) {\n                    const _this = $(this);\n                    const _class = _this.attr('class').match(/current/);\n                    if(_class) {\n                        _this.removeClass('current');\n                        const searchClass = (search.target.attr('class'))? search.target.attr('class') : null;\n                        if(!searchClass) {\n                            html.removeClass('gNav-show');\n                        }\n                    }\n                }\n            }\n        });\n\n        globalNav.btn.on('click', function(){\n            if(options.windoWidth < options.breakpoints.pc) {\n                const _this = $(this);\n                const _parent = _this.parent();\n                const _class = _parent.attr('class').match(/current/);\n                globalNav.parent.removeClass('current');\n                html.removeClass('gNav-show');\n                if(!_class) {\n                    _parent.addClass('current');\n                    html.addClass('gNav-show');\n                }\n            }\n        });\n\n        //メニュー開閉\n        let menuopener = {\n            btn: $('#menu-opener'),\n            target: $('#global-nav')\n        }\n        menuopener.btn.on('click', function(){\n            const _this = $(this);\n            const _class = _this.attr('class');\n            const open = (_class)? (_class.match(/is-open/))? true : false : false;\n            _this.toggleClass('is-open');\n            menuopener.target.toggleClass('is-open');\n            if(open) {\n                globalNav.parent.removeClass('current');\n                html.removeClass('gNav-show');\n            }\n        });\n\n        $('#global-nav .products').globalNavChild_paging();\n\n        //検索開閉\n        let search = {};\n        search.btn = $('#global-header .link__other .search');\n        search.target = $('#global-header #searchBox');\n        search.input = search.target.find('input[type=\"text\"]');\n        search.btn.on('click', function(){\n            $(this).toggleClass('is-open');\n            search.target.toggleClass('is-open');\n            if(search.target.attr('class').match(/is-open/)) {\n                search.input.select();\n                html.addClass('gNav-show');\n            } else {\n                search.input.blur();\n                html.removeClass('gNav-show');\n            }\n        });\n\n        // キャラクターのスクロール\n        let character = {};\n        character.base = globalNav.target.find('.products .child__nav__group .nav__character');\n        character.wrap = character.base.find('.nav__character__wrapper');\n        character.ul = character.wrap.find('ul');\n        character.li = character.ul.find('li');\n        character.len = character.li.length;\n        character.wrapwidth = character.wrap.width();\n        character.wrapHalf = character.wrapwidth / 2;\n        character.width = (character.li.width() + 16) * character.len - 16;\n        character.distance = (Math.round(character.width - character.wrapwidth) > 0)? Math.round(character.width - character.wrapwidth)/2 : 0;\n        character.speed = 0;\n        character.position = -character.distance;\n        character.interval;\n        // character.ul.clone(true).appendTo(character.wrap).css({left: character.width});\n        character.ul.css({transform: `translate(${character.position}px)`});\n        character.move = function() {\n            character.position = character.position + (character.speed / 10);\n            if(character.speed > 0 && character.position > 0) {\n                character.position = 0;\n            } else if(character.speed < 0 && character.position < -character.distance*2) {\n                character.position = -character.distance*2;\n            }\n            character.ul.css({transform: `translate(${character.position}px)`});\n            character.interval = setTimeout(character.move, 33);\n        }\n\n        character.wrap.on({\n            'mouseenter': function() {\n                if(options.windoWidth >= options.breakpoints.pc) {\n                    character.move();\n                }\n                $(this).on('mousemove', function(e){\n                    const x = e.clientX;\n                    if(x < character.wrapHalf) {\n                        character.speed = Math.round( (character.wrapHalf - x) / character.wrapHalf * 100 );\n                    } else {\n                        character.speed = Math.round( -(x - character.wrapHalf) / character.wrapHalf * 100 );\n                    }\n                });\n            },\n            'mouseleave': function() {\n                character.wrap.off('mousemove');\n                character.speed = 0;\n                clearTimeout(character.interval);\n            }\n        });\n\n        // character.wrap.eq(0).velocity(\n        //     {\n        //         left: -(character.width)\n        //     },\n        //     {\n        //         duration: 2000 * character.len,\n        //         easing: 'linear',\n        //         progress: function(elements, complete, remaining, start, tweenValue) {\n        //             console.log((complete * 100) + \"%\");\n        //             console.log(remaining + \"ms remaining!\");\n        //             console.log(\"The current tween value is \" + tweenValue)\n        //         },\n        //         complete: function(){\n        //             console.log('complete move end');\n        //         }\n        //     }\n        // )\n        $(window).on('resize', function(){\n            options.windoWidth = $(window).width();\n            character.wrapwidth = character.wrap.width();\n            character.wrapHalf = character.wrapwidth / 2;\n            character.width = character.ul.width();\n        });\n    }); \n\n\n    $.fn.globalNavChild_paging = function() {\n        const _this = $(this);\n        const group = _this.find('.child__nav__group');\n        const btn = _this.find('.switch__gnav__child button');\n        let page = Number(_this.attr('data-page'));\n        btn.on('click', function() {\n            const index = btn.index(this) + 1;\n            const _btn = $(this);\n            const _class = _btn.attr('class');\n            const current = (_class)? (_class.match(/current/))? true : false : false;\n            if(!current) {\n                btn.removeClass('current');\n                _btn.addClass('current');\n                group.attr('data-page', index);\n            }\n        });\n    }\n\n    // アニメーション位置の操作\n    $.fn.scrollingAnimation = function(options) {\n        const thisClass = `.${$(this).attr('class')}`;\n        let o = $.extend({\n            margin: 0,\n            list: [],\n            target: $(thisClass),\n            length: $(thisClass).length,\n            windowHeight: window.innerHeight ? window.innerHeight: $(window).height(),            \n            doc: $(document),\n            scrollPosition: $(document).scrollTop()\n        }, options);\n        if(o.length){\n            for(var i = 0; i < o.length; i++){\n                // console.log(o.target.eq(i).position())\n                o.list.push(o.target.eq(i).position().top);\n            }\n        }\n        // console.table(o);\n        const addAnimate = function(){\n            for(var i = 0; i < o.length; i++){\n                const self = o.target.eq(i);\n                const regexp = RegExp('animated');\n                if(!self.attr('class').match(regexp)){\n                    var thisPos = o.list[i] - o.windowHeight + o.margin;\n                    // if(_this.attr('class').match(/child/)){\n                    //     if(_scroll_pos >= _thisPos + Number(_this.attr('data-position'))){\n                    //         _this.addClass('animated');\n                    //         _this.removeClass('animate-pos');\n                    //     }\n                    // } else {\n                    //     if(_scroll_pos >= _thisPos) {\n                    //         _this.addClass('animated');\n                    //         _this.removeClass('animate-pos');\n                    //     }\n                    // }\n                    // console.log(o.scrollPosition, thisPos)\n                    if(o.scrollPosition >= thisPos) {\n                        self.addClass('animated');\n                        self.removeClass('animation-pos');\n                    }\n                }\n            }\n            o.length = $(thisClass).length;\n        }\n        addAnimate();\n        o.doc.on('scroll', function(){\n            if(!o.length) {\n                o.doc.off('scroll');\n            } else {\n                o.scrollPosition = o.doc.scrollTop();\n                addAnimate();\n            }\n        });\n    }\n\n\n    // URL書き換え\n    $.fn.scrollingChangeURL = function(options) {\n        let o = $.extend({\n            margin: 0,\n            list: [],\n            target: $('.sec__corporate'),\n            length: $('.sec__corporate').length,\n            windowHeight: window.innerHeight ? window.innerHeight: $(window).height(),            \n            doc: $(document),\n            scrollPosition: $(document).scrollTop(),\n            page: 0,\n            url: '',\n            hash: ''\n        }, options);\n        o.hash = location.hash.replace(/^#/, '');\n        console.log(o.hash)\n        if(o.length){\n            for(var i = 0; i < o.length; i++){\n                o.list.push(Math.floor(o.target.eq(i).position().top));\n            }\n        }\n        if(o.hash) {\n            history.pushState(null, null, '/corporate/' + o.hash);\n            $('#' + o.hash).velocity(\"scroll\", { duration: 1, offset: -120, easing: \"swing\" });\n        }\n        const changeURL = function(){\n            for(var i = 0; i < o.length; i++){\n                const self = o.target.eq(i);\n                const thisPos = o.list[i] - o.windowHeight + o.margin;\n                if(o.scrollPosition >= thisPos) {\n                    o.page = i;\n                }\n            }\n            const dataurl = o.target.eq(o.page).attr('data-url');\n            if(o.url != dataurl) {\n                o.url = dataurl;\n                history.pushState(null, null, o.url);\n            }\n        }\n        o.doc.on('scroll', function(){\n            o.scrollPosition = o.doc.scrollTop();\n            changeURL();\n        });\n    }\n})(jQuery, options)"],"sourceRoot":"/source/"}