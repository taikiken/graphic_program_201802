self.CavalryLogger&&CavalryLogger.start_js(["gO30U"]),__d("ChannelClientID",[],function(e,t,n,r,i,s){var a=(2147483648*Math.random()|0).toString(16),o={getID:function(){return a}};i.exports=o},null),__d("destroyOnUnload",["Run"],function(e,t,n,r,i,s){function a(e){t("Run").onLeave(e)}i.exports=a},null),__d("ImageTimingHelper",["Arbiter","BigPipe","URI"],function(e,t,n,r,i,s){var a={},o={};t("Arbiter").subscribe(t("BigPipe").Events.init,function(e,n){n.lid&&"0"!==n.lid&&n.arbiter.subscribe("images_displayed",function(e,n){var r=a[n.lid];r||(r=a[n.lid]=[]),n.images.forEach(function(e){try{var i=new(t("URI"))(e);e=i.setFragment("").toString()}catch(s){return}o[e]||(o[e]=!0,r.push({pagelet:n.pagelet,timeslice:n.timeslice,ts:n.ts,uri:e}))})})}),i.exports.getImageTimings=function(e){return a[e]||[]}},null),__d("PageletEventsHelper",["Arbiter","PageletEventConstsJS"],function(e,t,n,r,i,s){function a(){return{pagelets:{},categories:{},phase_start:{},display_resources:{},all_resources:{}}}function o(e,t,n,r){void 0==R[r].pagelets[t]&&(R[r].pagelets[t]={}),R[r].pagelets[t][e]=n}function u(e){e.subscribe(c,function(e,n){var r=n.event,i=n.ts,s=n.id,a=n.lid,u=n.phase,l=n.categories,c=n.allResources,d=n.displayResources;o(r,s,i,a);var p=R[a],g=p.pagelets[s];r===t("PageletEventConstsJS").ARRIVE_END&&(g.phase=u,p.all_resources[s]=c,p.display_resources[s]=d),r!==t("PageletEventConstsJS").ONLOAD_END&&r!==t("PageletEventConstsJS").DISPLAY_END||!l||l.forEach(function(e){void 0==p.categories[e]&&(p.categories[e]={}),p.categories[e][r]=i});for(var h=0,_=f.length;_>h;h++)f[h](s,r,i,a)}),e.subscribe(d,function(e,t){R[t.lid].phase_start[t.phase]=t.ts})}var l="BigPipe/init",c="pagelet_event",d="phase_begin",R={},f=[],p=!1,g={init:function(){p||(t("Arbiter").subscribe(l,function(e,t){var n=t.lid,r=t.arbiter;R[n]=a(),u(r)}),p=!0)},getMetrics:function(e){return R[e]?JSON.parse(JSON.stringify(R[e])):null},subscribeToPageletEvents:function(e){return f.push(e),{remove:function(){f.splice(0,f.indexOf(e))}}}};i.exports=g},null),__d("PluginCSSReflowHack",["Style"],function(e,t,n,r,i,s){var a={trigger:function(e){setTimeout(function(){var n="border-bottom-width",r=t("Style").get(e,n);t("Style").set(e,n,parseInt(r,10)+1+"px");var i=e.offsetHeight;return t("Style").set(e,n,r),i},1e3)}};i.exports=a},null),__d("BanzaiLogger",["Banzai"],function(e,t,n,r,i,s){function a(e){return{log:function(n,r){t("Banzai").post(u._getRoute(n),r,e)},registerToSendWithBeacon:function(e,n,r,i){t("Banzai").registerToSendWithBeacon(u._getRoute(e),n,r,i)},_getRoute:function(e){return o+":"+e}}}var o="logger",u=a();u.create=a,i.exports=u},null),__d("BanzaiODS",["invariant","Banzai"],function(e,t,n,r,i,s,a){function o(){function e(e,t,i,s){if(void 0===i&&(i=1),void 0===s&&(s=1),e in r){if(r[e]<=0)return;i/=r[e]}var a=n[e]||(n[e]={}),o=a[t]||(a[t]=[0]);i=Number(i),s=Number(s),isFinite(i)&&isFinite(s)&&(o[0]+=i,arguments.length>=4&&(o[1]||(o[1]=0),o[1]+=s))}var n={},r={};return{setEntitySample:function(e,t){r[e]=Math.random()<t?t:0},bumpEntityKey:function(t,n,r){e(t,n,r)},bumpFraction:function(t,n,r,i){e(t,n,r,i)},flush:function(e){for(var r in n)t("Banzai").post("ods:"+r,n[r],e);n={}}}}var u=o();u.create=o,t("Banzai").subscribe(t("Banzai").SEND,u.flush.bind(u,null)),i.exports=u},18),__d("PagePluginActionTypes",[],function(e,t,n,r,i,s){i.exports=Object.freeze({CLICK:"click"})},null),__d("PagePluginActions",[],function(e,t,n,r,i,s){i.exports=Object.freeze({PAGE_AVATAR:"page_avatar",PAGE_CTA:"page_cta",PAGE_LIKE:"page_like",PAGE_PERMALINK:"page_permalink",PAGE_SHARE:"page_share",PAGE_UNLIKE:"page_unlike"})},null),__d("PluginPageActionLogger",["BanzaiLogger","BanzaiODS","DOM","Event","PagePluginActions","PagePluginActionTypes"],function(e,t,n,r,i,s){var a={initializeClickLoggers:function(e,n,r,i,s,a,o,u,l,c){var d=function(s,a){try{var o=t("DOM").find(i,"."+s);t("Event").listen(o,"click",function(i){t("BanzaiODS").bumpEntityKey("platform_www","platform.plugin.page.action"),t("BanzaiLogger").log("PagePluginActionsLoggerConfig",{page_id:n,page_plugin_action:a,page_plugin_action_type:t("PagePluginActionTypes").CLICK,referer_url:r,is_sdk:e})})}catch(u){}};d(s,t("PagePluginActions").PAGE_LIKE),d(a,t("PagePluginActions").PAGE_UNLIKE),d(o,t("PagePluginActions").PAGE_AVATAR),d(u,t("PagePluginActions").PAGE_PERMALINK),d(l,t("PagePluginActions").PAGE_SHARE),d(c,t("PagePluginActions").PAGE_CTA)}};i.exports=a},null),__d("XHRHttpError",[],function(e,t,n,r,i,s){"use strict";var a="HTTP_CLIENT_ERROR",o="HTTP_PROXY_ERROR",u="HTTP_SERVER_ERROR",l="HTTP_TRANSPORT_ERROR",c="HTTP_UNKNOWN_ERROR",d={HTTP_CLIENT_ERROR:a,HTTP_PROXY_ERROR:o,HTTP_SERVER_ERROR:u,HTTP_TRANSPORT_ERROR:l,HTTP_UNKNOWN_ERROR:c,getErrorCode:function(e,t){if(0===t){var n=e.getProtocol();return"file"===n||"ftp"===n?null:l}return t>=100&&200>t?o:t>=200&&300>t?null:t>=400&&500>t?a:t>=500&&600>t?u:t>=12001&&12156>t?l:c}};i.exports=d},null),__d("xhrSimpleDataSerializer",[],function(e,t,n,r,i,s){"use strict";function a(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}i.exports=a},null),__d("XHRRequest",["invariant","Env","ErrorUtils","ResourceTimingsStore","ResourceTypes","TimeSlice","URI","XHRHttpError","ZeroRewrites","getAsyncHeaders","xhrSimpleDataSerializer"],function(e,t,n,r,i,s,a){function o(e){"use strict";this.setURI(e),this.setResponseType(null),this.setMethod("POST"),this.setTransportBuilder(t("ZeroRewrites").getTransportBuilderForURI(this.getURI())),this.setDataSerializer(t("xhrSimpleDataSerializer")),this.$XHRRequest1=t("ResourceTimingsStore").getUID(t("ResourceTypes").XHR,null!=e?e.toString():"")}var u={errorCode:null,errorMsg:null,errorType:null},l={loadedBytes:null,totalBytes:null};o.prototype.setURI=function(e){"use strict";return this.$XHRRequest2=t("ZeroRewrites").rewriteURI(new(t("URI"))(e)),this},o.prototype.getURI=function(){"use strict";return this.$XHRRequest2},o.prototype.setResponseType=function(e){"use strict";return this.$XHRRequest3=e,this},o.prototype.setMethod=function(e){"use strict";return this.$XHRRequest4=e,this},o.prototype.getMethod=function(){"use strict";return this.$XHRRequest4},o.prototype.setData=function(e){"use strict";return this.$XHRRequest5=e,this},o.prototype.getData=function(){"use strict";return this.$XHRRequest5},o.prototype.setRawData=function(e){"use strict";return this.$XHRRequest6=e,this},o.prototype.setRequestHeader=function(e,t){"use strict";return this.$XHRRequest7||(this.$XHRRequest7={}),this.$XHRRequest7[e]=t,this},o.prototype.setTimeout=function(e){"use strict";return this.$XHRRequest8=e,this},o.prototype.getTimeout=function(){"use strict";return this.$XHRRequest8},o.prototype.setResponseHandler=function(e){"use strict";return this.$XHRRequest9=e,this},o.prototype.getResponseHandler=function(){"use strict";return this.$XHRRequest9},o.prototype.setErrorHandler=function(e){"use strict";return this.$XHRRequest10=e,this},o.prototype.getErrorHandler=function(){"use strict";return this.$XHRRequest10},o.prototype.setNetworkFailureHandler=function(e){"use strict";return this.$XHRRequest11=e,this},o.prototype.getNetworkFailureHandler=function(){"use strict";return this.$XHRRequest11},o.prototype.setAbortHandler=function(e){"use strict";return this.$XHRRequest12=e,this},o.prototype.getAbortHandler=function(){"use strict";return this.$XHRRequest12},o.prototype.setTimeoutHandler=function(e){"use strict";return this.$XHRRequest13=e,this},o.prototype.setUploadProgressHandler=function(e){"use strict";return this.$XHRRequest14=e,this},o.prototype.setDownloadProgressHandler=function(e){"use strict";return this.$XHRRequest15=e,this},o.prototype.setTransportBuilder=function(e){"use strict";return this.$XHRRequest16=e,this},o.prototype.setDataSerializer=function(e){"use strict";return this.$XHRRequest17=e,this},o.prototype.send=function(){"use strict";var e=this.$XHRRequest8,n=this.$XHRRequest16(),r=this.getURI(),i=new(t("URI"))(r).getQualifiedURI().toString(),s=this.$XHRRequest1;t("ResourceTimingsStore").updateURI(t("ResourceTypes").XHR,s,i),t("ResourceTimingsStore").measureRequestSent(t("ResourceTypes").XHR,s),this.$XHRRequest18=n;var o;"POST"===this.$XHRRequest4||!this.$XHRRequest6||a(0),t("Env").force_param&&Object.assign(this.$XHRRequest5,t("Env").force_param),"GET"===this.$XHRRequest4||this.$XHRRequest6?(r.addQueryData(this.$XHRRequest5),o=this.$XHRRequest6):o=this.$XHRRequest17(this.$XHRRequest5);var u=t("TimeSlice").guard(function(e){t("ResourceTimingsStore").measureResponseReceived(t("ResourceTypes").XHR,s);for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];e.apply(this,r)},"XHRRequest response received",{isContinuation:!0});n.onreadystatechange=this.$XHRRequest19(u),n.onerror=this.$XHRRequest20(u),n.upload&&this.$XHRRequest14&&(n.upload.onprogress=this.$XHRRequest21.bind(this)),this.$XHRRequest15&&(n.onprogress=this.$XHRRequest22.bind(this)),e&&(this.$XHRRequest23=setTimeout(this.$XHRRequest24.bind(this),e)),null!==this.$XHRRequest25&&void 0!==this.$XHRRequest25&&(n.withCredentials=this.$XHRRequest25),n.open(this.$XHRRequest4,r.toString(),!0);var l=!1;if(this.$XHRRequest7)for(var c in this.$XHRRequest7)"content-type"===c.toLowerCase()&&(l=!0),n.setRequestHeader(c,this.$XHRRequest7[c]);"POST"!=this.$XHRRequest4||this.$XHRRequest6||l||n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var d=t("getAsyncHeaders")(r);Object.keys(d).forEach(function(e){n.setRequestHeader(e,d[e])}),"arraybuffer"===this.$XHRRequest3&&("responseType"in n?n.responseType="arraybuffer":"overrideMimeType"in n?n.overrideMimeType("text/plain; charset=x-user-defined"):"setRequestHeader"in n&&n.setRequestHeader("Accept-Charset","x-user-defined")),"blob"===this.$XHRRequest3&&(n.responseType=this.$XHRRequest3),n.send(o)},o.prototype.abort=function(e){"use strict";this.$XHRRequest26(),this.$XHRRequest12&&t("ErrorUtils").applyWithGuard(this.$XHRRequest12,null,[e],null,"XHRRequest:_abortHandler")},o.prototype.$XHRRequest26=function(){"use strict";var e=this.$XHRRequest18;e&&(e.onreadystatechange=null,e.abort()),this.$XHRRequest27()},o.prototype.$XHRRequest24=function(){"use strict";this.$XHRRequest26(),this.$XHRRequest13&&t("ErrorUtils").applyWithGuard(this.$XHRRequest13,null,null,null,"XHRRequest:_abortHandler")},o.prototype.$XHRRequest28=function(e){"use strict";if(this.$XHRRequest3){if("response"in e)return e.response;if("arraybuffer"===this.$XHRRequest3&&window.VBArray)return window.VBArray(e.responseBody).toArray()}return e.responseText},o.prototype.$XHRRequest20=function(e){"use strict";return function(){var n={};n.errorCode=t("XHRHttpError").HTTP_TRANSPORT_ERROR,n.errorMsg="Network Failure.",n.errorType="Network",this.$XHRRequest11?t("ErrorUtils").applyWithGuard(e.bind(void 0,this.$XHRRequest11),null,[n],null,"XHRRequest:_networkFailureHandler"):e(function(){})}.bind(this)},o.prototype.$XHRRequest19=function(e){"use strict";var n=t("TimeSlice").guard(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return e.apply(this,n)},"XHRRequest onreadystatechange",{isContinuation:!1});return function(){var r=this.$XHRRequest18,i=r.readyState;if(i>=2){var s=4===i,a=this.getURI(),o=t("XHRHttpError").getErrorCode(a,r.status),l=this.$XHRRequest9;if(null!==o)s&&(u.errorCode=o,u.errorMsg=this.$XHRRequest28(r),u.errorType=r.status?"HTTP "+r.status:"HTTP",this.$XHRRequest10?t("ErrorUtils").applyWithGuard(e.bind(void 0,this.$XHRRequest10),null,[u],null,"XHRRequest:_errorHandler"):e(function(){}));else if(l){var c=null;if(l.includeHeaders&&(c=r.getAllResponseHeaders()),s||l.parseStreaming&&3===i){var d=s?e:n;t("ErrorUtils").applyWithGuard(d.bind(void 0,l),null,[this.$XHRRequest28(r),c,s],null,"XHRRequest:handler")}}else s&&e(function(){});s&&this.$XHRRequest27()}}.bind(this)},o.prototype.$XHRRequest21=function(e){"use strict";l.loadedBytes=e.loaded,l.totalBytes=e.total,this.$XHRRequest14&&t("ErrorUtils").applyWithGuard(this.$XHRRequest14,null,[l],null,"XHRRequest:_uploadProgressHandler")},o.prototype.$XHRRequest22=function(e){"use strict";var n={loadedBytes:e.loaded,totalBytes:e.total};this.$XHRRequest15&&t("ErrorUtils").applyWithGuard(this.$XHRRequest15,null,[n],null,"XHRRequest:_downloadProgressHandler")},o.prototype.$XHRRequest27=function(){"use strict";clearTimeout(this.$XHRRequest23),delete this.$XHRRequest18},i.exports=o},null),__d("SimpleFBAuthenticatedXHRRequest",["invariant","CurrentUser","DTSG","ServerJSDefine","XHRRequest","isFacebookURI"],function(e,t,n,r,i,s,a){function o(e,n){"use strict";l.constructor.call(this,e);var r={__dyn:t("ServerJSDefine").getLoadedModuleHash(),__req:(c++).toString(36),__ajax__:1,__a:1,__user:t("CurrentUser").getID()};l.setData.call(this,babelHelpers["extends"]({},n,r))}var u,l,c=1;u=babelHelpers.inherits(o,t("XHRRequest")),l=u&&u.prototype,o.prototype.send=function(){"use strict";if(!t("isFacebookURI")(this.getURI()))return l.send.call(this);if(t("DTSG").getCachedToken){var e=t("DTSG").getCachedToken();return e?this.sendOnDTSGToken(e):(t("DTSG").getToken().done(function(e){return this.sendOnDTSGToken(e)}.bind(this)),this)}this.sendOnDTSGToken(t("DTSG").getToken())},o.prototype.sendOnDTSGToken=function(e){"use strict";return e&&l.setData.call(this,babelHelpers["extends"]({},this.getData(),{fb_dtsg:e})),l.send.call(this)},o.prototype.setData=function(e){"use strict";a(0)},o.parseResponse=function(e){"use strict";return JSON.parse(e.substr(9))},o.getPayload=function(e){"use strict";var t=o.parseResponse(e).payload;return t.payload?t.payload:t},i.exports=o},null),__d("XFantailLogController",["XController"],function(e,t,n,r,i,s){i.exports=t("XController").create("/ajax/fantail/",{service:{type:"String",required:!0}})},null),__d("FantailLogQueue",["ChannelClientID","CircularBuffer","FantailConfig","PHPQuerySerializer","SimpleFBAuthenticatedXHRRequest","XFantailLogController","destroyOnUnload","setIntervalAcrossTransitions","sprintf"],function(e,t,n,r,i,s){function a(e){"use strict";this.$FantailLogQueue2=e,this.$FantailLogQueue3=new(t("CircularBuffer"))(200),t("setIntervalAcrossTransitions")(this.$FantailLogQueue4.bind(this),3e4),t("destroyOnUnload")(this.$FantailLogQueue4.bind(this))}var o={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};a.get=function(e){"use strict";return a.$FantailLogQueue1=a.$FantailLogQueue1||{},a.$FantailLogQueue1[e]=a.$FantailLogQueue1[e]||new a(e),a.$FantailLogQueue1[e]},a.prototype.debug=function(e){"use strict";for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];this.$FantailLogQueue5.apply(this,[o.DEBUG,e].concat(n))},a.prototype.info=function(e){"use strict";for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];this.$FantailLogQueue5.apply(this,[o.INFO,e].concat(n))},a.prototype.warn=function(e){"use strict";for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];this.$FantailLogQueue5.apply(this,[o.WARN,e].concat(n))},a.prototype.error=function(e){"use strict";for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];this.$FantailLogQueue5.apply(this,[o.ERROR,e].concat(n))},a.prototype.$FantailLogQueue5=function(e,n){"use strict";for(var r=arguments.length,i=Array(r>2?r-2:0),s=2;r>s;s++)i[s-2]=arguments[s];var a=t("sprintf").apply(void 0,[n].concat(i));this.$FantailLogQueue3.write({log_time:Date.now(),log:a,severity:e,device_id:t("ChannelClientID").getID()})},a.prototype.$FantailLogQueue4=function(){"use strict";var e=this.$FantailLogQueue3.read();if(e.length>0){var n={log_time:[],log:[],severity:[],device_id:[]};e.forEach(function(e){n.log_time.push(e.log_time),n.log.push(e.log),n.severity.push(e.severity),n.device_id.push(e.device_id)}),this.$FantailLogQueue3.clear();var r=t("XFantailLogController").getURIBuilder().setString("service",this.$FantailLogQueue2).getURI();new(t("SimpleFBAuthenticatedXHRRequest"))(r,n).setMethod("POST").setDataSerializer(t("PHPQuerySerializer").serialize).setRequestHeader("Content-Type","application/x-www-form-urlencoded").send()}},i.exports=a},null),__d("NavigationMetricsEnumJS",[],function(e,t,n,r,i,s){i.exports=Object.freeze({NAVIGATION_START:"navigationStart",UNLOAD_EVENT_START:"unloadEventStart",UNLOAD_EVENT_END:"unloadEventEnd",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",SECURE_CONNECTION_START:"secureConnectionStart",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading",DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED_EVENT_START:"domContentLoadedEventStart",DOM_CONTENT_LOADED_EVENT_END:"domContentLoadedEventEnd",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"})},null),__d("ResourceTimingMetricsEnumJS",[],function(e,t,n,r,i,s){i.exports=Object.freeze({START_TIME:"startTime",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",SECURE_CONNECTION_START:"secureConnectionStart",CONNECT_END:"connectEnd",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd"})},null),__d("ReactSpeedHelper",["LogBuffer","ReactDOM"],function(e,t,n,r,i,s){var a={enableRenderMeasurements:function(){t("ReactDOM").enableRenderMeasurements&&t("ReactDOM").enableRenderMeasurements()},getMetrics:function(e,n){return t("LogBuffer").read("react_speed").filter(function(t){return(null==e||t.begin>=e)&&(null==n||t.end<=n)})}};i.exports=a},null),__d("sourceMetaToString",[],function(e,t,n,r,i,s){function a(e,t){var n;return e.name?(n=e.name,e.module&&(n=e.module+"."+n)):e.module&&(n=e.module+".<anonymous>"),t&&e.line&&(n=(n?n:"<anonymous>")+":"+e.line,e.column&&(n+=":"+e.column)),n}i.exports=a},null),__d("NavigationTimingHelper",["NavigationMetricsEnumJS","forEachObject","performance"],function(e,t,n,r,i,s){function a(e,n){var r={};return t("forEachObject")(t("NavigationMetricsEnumJS"),function(t){var i=n[t];i&&(r[t]=i+e)}),r}var o={getAsyncRequestTimings:function(e){if(e&&t("performance").timing&&t("performance").getEntriesByName){var n=t("performance").getEntriesByName(e);if(0!==n.length)return a(t("performance").timing.navigationStart,n[0])}},getNavTimings:function(){return t("performance").timing?a(0,t("performance").timing):void 0}};i.exports=o},null),__d("ResourceTimingBootloaderHelper",["Bootloader","ErrorUtils","ImageTimingHelper","Map","ResourceTimingMetricsEnumJS","ResourceTimingsStore","ResourceTypes","Set","URI","forEachObject","isEmpty","performance"],function(e,t,n,r,i,s){function a(e){for(var t=E,n=Array.isArray(t),r=0,t=n?t:t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if(r=t.next(),r.done)break;i=r.value}var s=i;if(e.endsWith(s))return!0}return!1}function o(e){var n=new(t("Map"));return t("ResourceTimingsStore").getMapFor(e).forEach(function(e){if(null!=e.requestSent){var t=n.get(e.uri);null!=t?t.push(e):n.set(e.uri,[e])}}),n.forEach(function(e){return e.sort(function(e,t){return e.requestSent-t.requestSent})}),n}function u(e,t,n,r){var i=e.get(t);if(null!=i)for(var s=0;s<i.length;s++){var a=i[s],o=a.requestSent,u=a.responseReceived;if((null==n||null!=o&&n>=o)&&(null==r||null!=u&&u>=r))return i.splice(s,s+1)[0]}return null}function l(e,n,r,i,s,l,f){if(t("performance").timing&&t("performance").getEntriesByType){var p={},g=t("performance").timing.navigationStart;r&&(p=t("ImageTimingHelper").getImageTimings(i).sort(function(e,t){return e.ts-t.ts}).reduce(function(e,t){return e[t.uri]?e:(e[t.uri]=t.pagelet,e)},{}));var h=Array.from(t("performance").getEntriesByType("resource")),_=h.filter(function(e){return e.duration>=0&&null!=e.startTime&&e.startTime+g>n&&(null==s||null==e.responseEnd||e.responseEnd+g<s)});_.sort(function(e,t){return e.startTime-t.startTime});for(var E=0,v=0,m=0,S=0,y=o(t("ResourceTypes").XHR),A=o(t("ResourceTypes").CSS),H=o(t("ResourceTypes").JS),b=0;b<_.length;b++){var C=_[b],I="",N="",O="",q=void 0,D=C.initiatorType;switch(D){case"css":case"link":case"script":var X=t("ResourceTimingsStore").parseMakeHasteURL(C.name);if(!X)continue;var P=X[0],L=X[1];if(("css"===L||"js"===L)&&f){var $="css"===L?A:H;if(q=u($,C.name,C.startTime+g,C.responseEnd+g),null!=q){N=L,I=q.uid;break}}if("css"===L||"js"===L){N=L;var M=T[C.name]||v++;I=M+"_"+P}else{var B=R(C.name);O=B[0],N=B[1],I=E++ +"_"+O}break;case"img":I=E++ +"_"+c(C.name),N="img";break;case"iframe":I=m++ +"_"+c(C.name)+d(C.name),N="iframe";break;case"xmlhttprequest":if(l){var U=c(C.name),x=d(C.name);if(a(x)){I=S++ +"_"+U+x,N="video";break}if(q=u(y,C.name,C.startTime+g,C.responseEnd+g),null!=q){N=t("ResourceTypes").XHR,I=q.uid;break}}default:continue}for(var G={},w=Object.keys(t("ResourceTimingMetricsEnumJS")),F=0;F<w.length;F++){var K=t("ResourceTimingMetricsEnumJS")[w[F]],k=C[K];k&&(G[K]=k+t("performance").timing.navigationStart)}if(null!=q){var z=q,j=z.requestSent,W=z.responseReceived;if(null!=n&&null!=j&&n>j||null!=s&&null!=W&&W>s)continue;G.requestSent=j,G.responseReceived=W}G.type=N,G.desc=I,"img"==N&&Object.prototype.hasOwnProperty.call(p,C.name)&&(G.pagelet=p[C.name]),G.transferSize=C.transferSize,G.encodedBodySize=C.encodedBodySize,void 0==e[C.name]&&(e[C.name]=[]),e[C.name].push(G)}}}function c(e){var n=new(t("URI"))(e).getDomain();return n}function d(e){var n=new(t("URI"))(e).getPath();return n}function R(e){return[c(e),"img"]}function f(e){var t=Object.keys(e).filter(function(e){return e.startsWith("start_bootload/")}).sort(function(t,n){return e[t]-e[n]}).map(function(e){return e.substring(e.indexOf("/")+1)});if(t.forEach(function(t){return v.forEach(function(n){var r=n+"/"+t;null!=e[r]&&(h[r]=e[r])})}),g=g.concat(t),g.length>p){var n=g.splice(0,g.length-p);n.forEach(function(e){return v.forEach(function(t){h[t+"/"+e]&&delete h[t+"/"+e]})})}}var p=500,g=[],h={},_={},T={},E=[".mp4",".m4v",".mpd","m4a"],v=new(t("Set"))(["bootload","js_exec","start_bootload","tag_bootload"]),m={addPastBootloaderMetricsToResourceTimings:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=t("Bootloader").getURLToHashMap();t("forEachObject")(e,function(e,i){var s=r[i];if(s){var a=new(t("Map"));a.set("bootloader_hash",s),v.forEach(function(e){var t=e+"/"+s,r=n[t]||h[t];null!=r&&a.set(e,r)}),a.size>0&&e.forEach(function(e){e.requestSent||e.responseReceived||a.forEach(function(t,n){return e[n]=t})})}})},mergeBootloaderMetricsAndResourceTimings:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];t("isEmpty")(T)&&(T=t("Bootloader").getURLToHashMap());var i=new(t("Map"));t("forEachObject")(T,function(e,t){i.set(e,t)});var s=[];return t("forEachObject")(n,function(t,n){var r=n.indexOf("/");if(-1!==r){var a=n.substring(0,r);if(v.has(a)){s.push(n);var o=n.substring(r+1),u=i.get(o);(u||(u=o,o=T[u]))&&(u.startsWith("data:")&&(u="inlined resource: "+o),null==e[u]&&(e[u]=[{}]),e[u].forEach(function(e){e.bootloader_hash=o,e[a]=t}))}}}),r||(f(n),s.forEach(function(e){return delete n[e]})),e},getLastTTIAndE2EImageResponseEnds:function(e,n,r){var i={TTI:e,E2E:n};if(!t("performance").timing)return i;var s=r.filter(function(t){return t.ts<=e}).map(function(e){return e.uri}).reduce(function(e,t){return e[t]=!0,e},{}),a=r.map(function(e){return e.uri}).reduce(function(e,t){return e[t]=!0,e},{});for(var o in _)_[o].forEach(function(e){"img"===e.type&&(s[o]&&(i.TTI=Math.max(i.TTI,e.responseEnd)),a[o]&&(i.E2E=Math.max(i.E2E,e.responseEnd)))});return i},getMetrics:function(e,n,r,i,s,a){return _={},t("isEmpty")(T)&&(T=t("Bootloader").getURLToHashMap()),l(_,e,n,r,i,s,a),_}};i.exports=m},null),__d("TimeSliceHelper",["LogBuffer","Map","ProfilingCounters","ReactSpeedHelper","sourceMetaToString"],function(e,t,n,r,i,s){function a(e,n,r){var i=n.counterFunction,s=void 0;if(r.guard){var a=t("sourceMetaToString")(r),o=r.guard.toString();s=a?o+" at "+a:o}else s=r.desc;var u=null!=r.counters?i(r.counters):null,l={begin:r.begin,end:r.end,name:s,id:r.id,counters:u,isEdgeContinuation:r.isEdgeContinuation};r.parentID&&r.parentID!==r.id&&(l.parentID=r.parentID),e.push(l)}function o(e,n,r){var i=n.counterFunction,s={begin:r.begin,end:r.end,name:"JS["+r.count+"]",counters:i(t("ProfilingCounters").wrapInSingleContext(r.contextsToBeMerged))};e.push(s)}function u(e,t){var n=t.indirectParentID,r=t.id,i=t.isEdgeContinuation;if(null!=n){var s=e.get(n),a=void 0;i=i,a=null!=s?{indirectParentID:s.indirectParentID,isEdgeContinuation:i&&s.isEdgeContinuation}:{indirectParentID:n,isEdgeContinuation:i},e.set(r,a)}}function l(e,t){var n=t.indirectParentID,r=t.isEdgeContinuation,i=t.id;if(null!=n&&n!==i){var s=e.get(n);return null!=s&&(n=s.indirectParentID,r=s.isEdgeContinuation&&r),babelHelpers["extends"]({},t,{parentID:n,isEdgeContinuation:r})}return t}var c=function(e,t){return Math.round(1e3*(e-t))},d={counterFunction:function(e){return e.getNestedTotals()}},R={formatMetricsForTransport:function(e){var n=[],r=[],i=[],s=new(t("Map")),a=new(t("Map")),o=0,u=function(e,t,n){var r=void 0;return t.has(e)?r=t.get(e):(r=n.length,t.set(e,r),n.push(e)),r},l=[];return null!=e&&e.forEach(function(e){var t=e.begin,d=e.end,R=e.name,f=e.id,p=e.counters,g=e.parentID,h=e.isEdgeContinuation,_=c(t,o),T=c(d,t);o=d;var E=u(R,s,n),v=[_,T,E],m=p||{},S=Object.keys(m).filter(function(e){return 0!==m[e]}).sort(),y=void 0;if(S.length>0){var A=S.join(),H=u(A,a,i);y=S.map(function(e){return m[e]}),y.unshift(H)}else y=[];f&&v.push(f),g&&(v.push(g),v.push(h)),l.push(v),r.push(y)}),{version:"compact",items:l,names:n,counters:r,counterSchemas:i}},getMetrics:function(e,n,r,i,s){s=null==s?d:babelHelpers["extends"]({},d,s);var c=[],R=a.bind(void 0,c,s),f=o.bind(void 0,c,s),p=t("LogBuffer").read("time_slice"),g=t("LogBuffer").read("time_slice_heartbeat");p.length>0&&function(){var e=Math.max.apply(null,p.map(function(e){return e.id}));g.forEach(function(t){return t.id+=e})}();var h=t("ReactSpeedHelper").getMetrics().map(function(e){return babelHelpers["extends"]({},e,{desc:"React["+e.name+"]"})}),_=p.concat(g,h),T=void 0,E=new(t("Map")),v=u.bind(void 0,E),m=l.bind(void 0,E),S=function(){T&&(T.count>1?f(T):R(m(T.first))),T=null},y=_.sort(function(e,t){return e.begin!==t.begin?e.begin-t.begin:e.end!==t.end?e.end-t.end:0}).filter(function(t){return(null==e||t.end>=e)&&(null==n||t.begin<=n)});if(y.length>0&&!y[0].representsExecution&&y[0].begin<e){var A=y[0];y[0]=babelHelpers["extends"]({},A,{begin:e})}return y.forEach(function(e){e.end-e.begin<r?T&&e.begin-T.end<i?(T.end=e.end,T.count++,null!=e.counters&&T.contextsToBeMerged.push(e.counters),2===T.count&&v(T.first),v(e)):(S(),T={begin:e.begin,end:e.end,count:1,first:e,contextsToBeMerged:null!=e.counters?[e.counters]:[]}):(S(),R(m(e)))}),S(),c}};i.exports=R},null),__d("PerfXFlusher",["invariant","Banzai"],function(e,t,n,r,i,s,a){function o(e){l.forEach(function(t){return a(t in e,'PerfXFlusher: Field "%s" missing in the PerfX payload',t)})}var u="perfx_custom_logger_endpoint",l=["perfx_page","perfx_page_type","lid"],c={flush:function(e){o(e),t("Banzai").post(u,e,{signal:!0})},registerToSendWithBeacon:function(e){t("Banzai").registerToSendWithBeacon(u,e)}};i.exports=c},null),__d("DataAttributeUtils",["DataStore","Parent"],function(e,t,n,r,i,s){var a=[],o={LEGACY_CLICK_TRACKING_ATTRIBUTE:"data-ft",CLICK_TRACKING_DATASTORE_KEY:"data-ft",ENABLE_STORE_CLICK_TRACKING:"data-fte",IMPRESSION_TRACKING_CONFIG_ATTRIBUTE:"data-xt-vimp",IMPRESSION_TRACKING_CONFIG_DATASTORE_KEY:"data-xt-vimp",REMOVE_LEGACY_TRACKING:"data-ftr",getDataAttribute:function(e,t){return u[t]?u[t](e):e.getAttribute(t)},setDataAttribute:function(e,t,n){return l[t]?l[t](e,n):e.setAttribute(t,n)},getDataFt:function(e){if(e.getAttribute(o.ENABLE_STORE_CLICK_TRACKING)){var n=t("DataStore").get(e,o.CLICK_TRACKING_DATASTORE_KEY);return n||(n=o.moveClickTrackingToDataStore(e,e.getAttribute(o.REMOVE_LEGACY_TRACKING))),n}return e.getAttribute(o.LEGACY_CLICK_TRACKING_ATTRIBUTE)},setDataFt:function(e,n){return e.getAttribute(o.ENABLE_STORE_CLICK_TRACKING)?void t("DataStore").set(e,o.CLICK_TRACKING_DATASTORE_KEY,n):void e.setAttribute(o.LEGACY_CLICK_TRACKING_ATTRIBUTE,n)},moveXTVimp:function(e){o.moveAttributeToDataStore(e,o.IMPRESSION_TRACKING_CONFIG_ATTRIBUTE,o.IMPRESSION_TRACKING_CONFIG_DATASTORE_KEY),a.push(e.id)},getXTrackableElements:function(){for(var e=a.map(function(e){return document.getElementById(e)}).filter(function(e){return!!e}),t=document.querySelectorAll("[data-xt-vimp]"),n=0;n<t.length;n++)e.push(t[n]);return e},getDataAttributeGeneric:function(e,n,r){var i=t("DataStore").get(e,r);return void 0!==i?i:e.getAttribute(n)},moveAttributeToDataStore:function(e,n,r){var i=e.getAttribute(n);i&&(t("DataStore").set(e,r,i),e.removeAttribute(n))},moveClickTrackingToDataStore:function(e,n){var r=e.getAttribute(o.LEGACY_CLICK_TRACKING_ATTRIBUTE);return r&&(t("DataStore").set(e,o.CLICK_TRACKING_DATASTORE_KEY,r),n&&e.removeAttribute(o.LEGACY_CLICK_TRACKING_ATTRIBUTE)),r},getClickTrackingParent:function(e){var n=t("Parent").byAttribute(e,o.LEGACY_CLICK_TRACKING_ATTRIBUTE)||t("Parent").byAttribute(e,o.ENABLE_STORE_CLICK_TRACKING);return n},getClickTrackingElements:function(e){return e.querySelectorAll("["+o.LEGACY_CLICK_TRACKING_ATTRIBUTE+"], ["+o.ENABLE_STORE_CLICK_TRACKING+"]")},getParentByAttributeOrDataStoreKey:function(e,n,r){for(;e&&(!e.getAttribute||!e.getAttribute(n))&&void 0===t("DataStore").get(e,r);)e=e.parentNode;return e}},u={"data-ft":o.getDataFt,"data-xt-vimp":function(e){return o.getDataAttributeGeneric(e,"data-xt-vimp","data-xt-vimp")},"data-ad":function(e){return o.getDataAttributeGeneric(e,"data-ad","data-ad")},"data-xt":function(e){return o.getDataAttributeGeneric(e,"data-xt","data-xt")}},l={"data-ft":o.setDataFt,"data-xt":function(e,n){t("DataStore").set(e,"data-xt",n)}};i.exports=o},null),__d("pageLoadedViaSWCache",[],function(e,t,n,r,i,s){function a(){return 1===self.__SW_CACHE__}i.exports=a},null),__d("PerfXLogger",["DataAttributeUtils","NavigationMetrics","NavigationTimingHelper","PerfXFlusher","Set","forEachObject","pageLoadedViaSWCache","performanceAbsoluteNow","setTimeoutAcrossTransitions"],function(e,t,n,r,i,s){var a={},o={},u=65e3,l=["e2e","tti","all_pagelets_displayed","all_pagelets_loaded"],c={},d={_listenersSetUp:!1,_setupListeners:function(){this._listenersSetUp||(this._subscribeToNavigationMetrics(),t("PerfXFlusher").registerToSendWithBeacon(function(){var e=[];return t("forEachObject")(a,function(t,n){if(!a[n].sent){var r=this.getPayload(n,"unload fired");null!=r&&e.push(r)}}.bind(this)),a={},e}.bind(this)),this._listenersSetUp=!0)},_init:function(e){var n=e.lid;if(null!=n){var r=o[n]||[];if(delete o[n],e.sw_controlled_tags){if(navigator.serviceWorker&&navigator.serviceWorker.controller)for(var i=0;i<e.sw_controlled_tags.length;i++)r.push(e.sw_controlled_tags[i]);delete e.sw_controlled_tags}a[n]=babelHelpers["extends"]({tags:new(t("Set"))(r),sent:!1},e),this._registerTimeoutSendback(n),this._setupListeners()}},initWithNavigationMetricsLID:function(e,n){var r=t("NavigationMetrics").getFullPageLoadLid();if(r){if(this._init(babelHelpers["extends"]({},n,{lid:r})),e&&e.always)for(var i=0;i<e.always.length;i++)d.addTag(r,e.always[i]);if(e&&e.swCache&&t("pageLoadedViaSWCache")())for(var s=0;s<e.swCache.length;s++)d.addTag(r,e.swCache[s])}},init:function(e,t){null!=t&&null!=e.lid&&(c[e.lid]=t),this._init(e)},addTag:function(e,t){var n=a[e];return n?void n.tags.add(t):(o[e]||(o[e]=[]),void o[e].push(t))},addTagWithNavigationMetricsLID:function(e){var n=t("NavigationMetrics").getFullPageLoadLid();n&&d.addTag(n,e)},_registerTimeoutSendback:function(e){var n=this._getFetchStart(e),r=u;null!=n&&(r-=t("performanceAbsoluteNow")()-n),
t("setTimeoutAcrossTransitions")(function(){return this._uploadPayload(e,"sendback time out")}.bind(this),r)},_subscribeToNavigationMetrics:function(){t("NavigationMetrics").addRetroactiveListener(t("NavigationMetrics").Events.EVENT_OCCURRED,function(e,t){e in a&&l.includes(t.event)&&Object.prototype.hasOwnProperty.call(t,"timestamp")&&null!=t.timestamp&&(a[e][t.event]=t.timestamp,t.visibilityState&&(a[e][t.event+"_page_visibility"]=t.visibilityState))}),t("NavigationMetrics").addRetroactiveListener(t("NavigationMetrics").Events.NAVIGATION_DONE,function(e,t){var n=t.serverLID;n in a&&(l.forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&null!=t[e]&&(a[n][e]=t[e])}),this._uploadPayload(n))}.bind(this))},_getPayloadWithOffset:function(e,n,r){var i=a[e];if(null==i)return null;var s=Object.assign({},i),o=document.querySelector('[id^="hyperfeed_story_id"]');if(o){var u=JSON.parse(t("DataAttributeUtils").getDataFt(o));u&&(s.mf_query_id=u.qid)}if(s.tags=Array.from(i.tags),this._adjustValues(s,n),s.fetch_start=n,"normal"===s.perfx_page_type){var l=t("NavigationTimingHelper").getNavTimings();null!=l&&null!=l.navigationStart&&(s.nav_to_fetch=n-l.navigationStart)}return null!=r&&(s.sendback_reason=r),delete s.sent,s},_uploadPayload:function(e,n){if(null!=a[e]&&!a[e].sent){var r=this.getPayload(e,n);null!=r&&(t("PerfXFlusher").flush(r),a[e].sent=!0)}},getPayload:function(e,t){return this._getPayloadWithOffset(e,this._getFetchStart(e),t)},_getFetchStart:function(e){if(!(e in a))return null;var n=void 0,r=a[e].perfx_page_type;if("quickling"==r){if(!(e in c))return null;n=t("NavigationTimingHelper").getAsyncRequestTimings(c[e])}else n=t("NavigationTimingHelper").getNavTimings();return n&&n.fetchStart?n.fetchStart:null},_adjustValues:function(e,t){l.forEach(function(n){Object.prototype.hasOwnProperty.call(e,n)&&(e[n]-=t)})}};i.exports=d},null);