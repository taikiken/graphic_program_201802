"use strict";var api=void 0,pageUrl=location.href;api=pageUrl.match(/sportsbull.s3/)||pageUrl.match(/localhost/)||pageUrl.match(/:61000/)?"//dev.sportsbull.jp/api/v1/toj/live/":pageUrl.match(/dev.sportsbull.jp/)?"//dev.sportsbull.jp/api/v1/toj/live/":pageUrl.match(/stg.sportsbull.jp/)?"//stg.sportsbull.jp/api/big6tv/live/2018s":"//sportsbull.jp/api/big6tv/live/2018s";var result=document.querySelector("#placeHolder"),accountId="5704890303001",playerId="r1Zn0fWf4f",playerHTML=void 0,flg=!0,initLoad=!1,videoLoaded=!1,json=[],data={lastupdate:"",live:{alt:{large:"",medium:""},error:{large:"",medium:""},interval:"",isPlaying:!1,video:{id:""}}},getJson=function e(){superagent.get(api).end(function(a,i){if(!i||a){var t='<img src="'+data.live.error.large+'">';result.innerHTML=t}else{var l=i.body;if(data.lastupdate=l.response.lastupdat,data.live.alt.large=l.response.live.alt.large,data.live.alt.medium=l.response.live.alt.medium,data.live.error.large=l.response.live.error.large,data.live.error.medium=l.response.live.error.medium,data.live.interval=l.response.live.interval,data.live.isPlaying=l.response.live.isPlaying,data.live.video.id=l.response.live.video.id,initLoad||(initLoad=!0,setInterval(e,1e3*data.live.interval)),data.live.isPlaying)videoLoaded||(mountVideoDom(),videoLoaded=!0);else{var r='<img src="'+data.live.alt.large+'">';if(flg=data.live.isPlaying,result.innerHTML=r,!flg){videoLoaded=!1;var d=document.getElementById("videoScript");d&&d.remove()}}}})},mountVideoDom=function(){var e='<video id="myPlayerID" class="video-js" data-video-id="'+data.live.video.id+'" data-account="'+accountId+'" data-player="'+playerId+'" data-embed="default" data-application-id controls >';result.innerHTML=e;var a=document.createElement("script");a.src="//players.brightcove.net/"+accountId+"/"+playerId+"_default/index.min.js",a.id="videoScript",document.body.appendChild(a),a.onload=function(){callback(),videojs("myPlayerID").ready(function(){var e=this;e.on("error",function(){var e='<img src="'+data.live.error.large+'">';result.innerHTML=e,videoLoaded=!1})})}},callback=function(){videojs("myPlayerID").on("ads-ad-ended",function(e){var a=this;a.play()})},getUserAgent=function(){var e=window.navigator.userAgent;"undotsushin-ios"!==e&&"undotsushin-android"!==e&&getJson()};getUserAgent();