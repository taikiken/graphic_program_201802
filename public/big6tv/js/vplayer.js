"use strict";var options={autoplay:!1,controls:!0,fluid:!1,plugins:{videoJsResolutionSwitcher:{"default":0}},nativeControlsForTouch:!1},isFirstPlay=!0,ua=window.navigator.userAgent.toLowerCase(),isIE=ua.indexOf("msie")>=0||ua.indexOf("trident")>=0;isIE&&(options.techOrder=["flash"]);var viewtype=function(){var e;return e=ua.indexOf("iPhone")>0||ua.indexOf("iPod")>0||ua.indexOf("Android")>0&&ua.indexOf("Mobile")>0||ua.indexOf("Windows Phone")>0?"sp":"pc"}(),player=videojs("content_video",options),firstLoad=!1,superagent=window.superagent,videoLoad=function e(){superagent.get("https://dev.sportsbull.jp/api/big6tv/live/2017a").end(function(a,t){var i=t.body.response.live.video,n=t.body.response.live.isPlaying,o={id:"content_video",adLabel:"広告",adTagUrl:"pc"===viewtype?i.ad_url.pc:i.ad_url.sp,timeout:3e3},r=i.sources.map(function(e,a){return{src:e.url,type:"application/x-mpegURL",label:e.label,res:e.res}});if(!$(".video_alt").html()){var s=$("<img/>",{src:t.body.response.live.alt.large,alt:""});$(".video_alt").append(s)}n?(firstLoad||(player.src({src:i.source,type:"application/x-mpegURL"}),firstLoad=!0,player.updateSrc(r),"function"==typeof player.ima&&player.ima(o),player.ga(),player.videoJsResolutionSwitcher()),$(".video__wrapper").show(),$(".video_alt").hide()):($(".video__wrapper").hide(),$(".video_alt").show()),setTimeout(function(){e()},1e3*t.body.response.live.interval)})};videoLoad();var contentPlayer=document.getElementById("content_video_html5_api");(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&contentPlayer.hasAttribute("controls")&&contentPlayer.removeAttribute("controls");var startEvent="click";(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&(startEvent="touchend"),player.one(startEvent,function(){isFirstPlay=!1,navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)?player.play():(player.ima.initializeAdDisplayContainer(),player.ima.requestAds(),player.play()),document.getElementsByClassName("vjs-captions-button")[0].style.display="none"}),player.one("ready",function(){(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i))&&(player.ima.initializeAdDisplayContainer(),player.ima.requestAds(),player.loadingSpinner.hide())}),player.on(["contentupdate"],function(){navigator.userAgent.match(/Android/i)||isFirstPlay||player.play()}),player.on(["loadedmetadata"],function(){navigator.userAgent.match(/android/i)&&player.play()}),player.on(["canplay"],function(){(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i))&&player.play()}),player.on(["adend"],function(){isIE&&player.updateSrc(sources),player.play(),document.getElementsByClassName("vjs-captions-button")[0].style.display="none"});
//# sourceMappingURL=vplayer.js.map
